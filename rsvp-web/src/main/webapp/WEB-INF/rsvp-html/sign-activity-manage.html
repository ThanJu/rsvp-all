<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSVP系统 - 活动中管理</title>


    <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="lib/font-awesome/css/font-awesome.css" rel="stylesheet"/>
    <link href="css/style.css" rel="stylesheet">
    <script src="lib/jquery/jquery.min.js"></script>
    <script src="js/commonApi.js"></script>

</head>

<body class="bg">
<section id="container">
    <header class="header">
        <div class="row">
            <div class="col-xs-9">
                当前窗口：<span class="windowId"></span>
            </div>
            <div class="col-xs-1" style="text-align: center">
                <a href="https://ai.baidu.com/facekit/page/form/E1CDD67E7CBA44DFBC5B86D940E52CA3" target="立即注册"><img
                        src="img/u3702.png">
                    <br>
                    立即注册</a>
            </div>
            <div class="col-xs-1" style="text-align: center">
                <a href="javascript:void(0)"><img src="img/u3700.png">
                    <br>
                    添加房间</a>
            </div>
            <div class="col-xs-1" style="text-align: center">
                <a href="javascript:void(0)"><img src="img/u3704.png">
                    <br>
                    添加车辆</a>
            </div>
        </div>
    </header>
    <section class="wrapper">
        <div id="container-fluid">
            <div class="row">
                <div class="col-md-10">
                    <div class="row sign-line">
                        <div class="col-xs-3">
                            已签到
                            <br>
                            <span class="alreadySignNum">279</span>
                        </div>
                        <div class="col-xs-3">
                            未签到
                            <br>
                            <span class="notSignNum">3321</span>
                        </div>
                        <div class="col-xs-3">
                            当前窗口
                            <br>
                            <span class="windowId"></span>
                        </div>
                        <div class="col-xs-3">
                            活动注册
                            <br>
                            <span class="activityRegisterNum">3600</span>
                        </div>
                    </div>
                    <div class="row sign-camera">
                        <div class="col-md-12">
                            <div class="input-group-btn">
                                <input type="text" id="search" class="lucency-input" placeholder="请输入确认码/手机号/姓名">
                                <a href="camera.html" target="活动中管理">
                                    <img src="img/u3767.png" class="btn-size"></a>
                            </div>
                        </div>
                    </div>
                    <div class="row sign-btn">
                        <div class="col-md-12">
                            <a href="javascript:void(0)">确认签到</a>
                            <a href="javascript:void(0)">打印</a>
                            <a href="javascript:void(0)">现场分房</a>
                        </div>
                    </div>
                    <div class="row sign-camera sign-userinfo">
                        <div class="col-md-4 card">
                            <div class="cover"><img src="img/u3726.png">
                                <br>
                                <br>
                                <ul>
                                    <li><h4>Amy</h4></li>
                                    <li>
                                        <small>13908087765</small>
                                    </li>
                                </ul>
                            </div>
                            <div class="synopsis skip">
                                <h4><a href="activity-form.html">&nbsp;&nbsp;未签到</a></h4>
                            </div>
                        </div>
                        <div class="col-md-4 card">
                            <table class="table">
                                <thead>
                                <h4 style="text-align: center">参会信息</h4>
                                <hr>
                                <tr>
                                    <th class="text-center">名称</th>
                                    <th class="text-left">单价</th>
                                    <th class="text-left">数量</th>
                                    <th class="text-left">总价</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td class="text-center">主会场门票</td>
                                    <td class="text-left">￥188</td>
                                    <td class="text-left">1</td>
                                    <td class="text-left">188</td>
                                </tr>
                                <tr>
                                    <td class="text-center">分会场门票</td>
                                    <td class="text-left">￥28</td>
                                    <td class="text-left">1</td>
                                    <td class="text-left">28</td>
                                </tr>
                                <tr>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td class="text-right"><strong>合计总额</strong></td>
                                    <td colspan="2">
                                    <td class="text-right">￥216</td>
                                </tr>
                                <tr>
                                    <td class="text-right"><strong>欠款</strong></td>
                                    <td colspan="2">
                                    <td class="text-right">￥216</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="col-md-4 card">

                            <table class="table hotel_table">
                                <h4 style="text-align: center">酒店信息</h4>
                                <hr>
                                <thead>
                                <tr>
                                    <th class="text-center" colspan="2">万豪酒店</th>
                                    <th class="text-left">海景房</th>
                                    <th class="text-left"><span style="color: red;font-weight: bold">未分配</span></th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td class="text-center" colspan="4">
                                        <ul>
                                            <li>入驻日期：</li>
                                            <li>退房日期：</li>
                                            <li>金额：1200/晚 &nbsp;&nbsp;天数：2</li>
                                        </ul>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                    <td class="text-right"><strong>合计总额</strong></td>
                                    <td class="text-right">2400</td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                    <td class="text-right"><strong>欠款</strong></td>
                                    <td class="text-right">0</td>
                                </tr>
                                </tbody>
                            </table>
                            <br>
                            <br>
                        </div>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="row">
                        <div class="col-md-12 card-right">
                            <ul>
                                <li>允许参会欠款签到
                                    <input type="checkbox"/>
                                </li>
                                <li>允许参会欠款签到
                                    <input type="checkbox"/>
                                </li>
                                <li>允许欠款打印胸卡
                                    <input type="checkbox"/>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</section>

<script src="lib/bootstrap/js/bootstrap.min.js"></script>
<script src="lib/common-scripts.js"></script>
<script src="lib/bootstrap-switch.js"></script>
<script src="js/commonApi.js"></script>
<script src="js/dataRegisterAjax.js"></script>
<script>

    //初始化获取数量

    //确认签到接口

    //签到人信息（参会信息、酒店信息、是否允许欠款、胸卡）

    var joinInfo = [
        {
            title: '主会场门票',
            unit: 188,
            num: 1,
            total: 188
        },
        {
            title: '分会场门票',
            unit: 28,
            num: 2,
            total: 56
        }
    ];
    var hotelInfo = [
        {
            title: '主会场门票',
            unit: 188,
            num: 1,
            total: 188
        },
        {
            title: '分会场门票',
            unit: 28,
            num: 2,
            total: 56
        }
    ];
    //打印机调用接口

    $(function () {

        var windowId = Utils.GetQueryString("windowId");
        $(".windowId").html(windowId);

        var activityId = 3;
        dataRegister.countRegister(activityId);

        $("#search").keypress(function (e) {
            if (e.keyCode == 13){
                var searchVal = $(this).val();
                var paramObj ={
                    activityId :activityId,
                    searchVal :searchVal
                }
                dataRegister.fetchDataRegisterByDataRegisterParam(paramObj);
            }
        })

    });
    var dataRegister = {
        countRegister: function (activityId) {

            dataRegisterAjax.newCommonApi(commonApi.newCommonApi());

            dataRegisterAjax.countDataRegister({
                model: {
                    activityInfoId: activityId
                },
                success: function (res) {

                    console.log(JSON.stringify(res));

                    if (res.status) {
                        var status = res.data.status;
                        var notSignNum = res.data.notSignNum;
                        var alreadySignNum = res.data.alreadySignNum;
                        var activityRegisterNum = res.data.activityRegisterNum;

                        $(".notSignNum").html(notSignNum);
                        $(".alreadySignNum").html(alreadySignNum);
                        $(".activityRegisterNum").html(activityRegisterNum);
                    }
                }
            });
        },
        fetchDataRegisterByDataRegisterParam: function (paramObj) {

            dataRegisterAjax.newCommonApi(commonApi.newCommonApi());

            dataRegisterAjax.fetchDataRegisterByRegister({
                model: {
                    activityInfoId: paramObj.activityId,
                    searchVal: paramObj.searchVal
                },
                success: function (res) {
                    console.log(JSON.stringify(res));
                    if (res.status) {
                    }
                }
            });
        }
    }
</script>
</body>

</html>
